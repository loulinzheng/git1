<!DOCTYPE html>
<!-- saved from url=(0041)http://www.linuxde.net/2013/10/15408.html -->
<html lang="zh-CN"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><script src="./配置Nagios监控IPMI硬件设备_监控统计与日志分析_Linux Today_files/ex" async=""></script><script charset="utf-8" async="" src="./配置Nagios监控IPMI硬件设备_监控统计与日志分析_Linux Today_files/tanxssp.js.下载"></script><script type="text/javascript" charset="gbk" id="tanx-s-mm_22964816_3205091_33734252" async="" src="./配置Nagios监控IPMI硬件设备_监控统计与日志分析_Linux Today_files/ex(1)"></script><meta name="renderer" content="webkit"><title> 配置Nagios监控IPMI硬件设备_监控统计与日志分析_Linux Today</title><meta name="keywords" content="Nagios"><meta name="description" content="作为系统管理员，最为担心的故障莫过是：半夜停电，担心UPS能不能坚持到早晨；双休日服务器配件故障，报修无门；精密空调失效，服务器被高温煎熬。以上这些都是机房环境，服务器设备硬件部分的故障。不同制造商之间设备往往使用不同管"><link href="http://112.124.15.130/res/linuxde_www/favicon.ico" rel="shortcut icon"><link href="./配置Nagios监控IPMI硬件设备_监控统计与日志分析_Linux Today_files/style.css" rel="stylesheet" type="text/css"><link href="./配置Nagios监控IPMI硬件设备_监控统计与日志分析_Linux Today_files/font-awesome.min.css" rel="stylesheet" type="text/css"> <!--[if IE 7]><link href="http://112.124.15.130/res/linuxde_www/css/font-awesome-ie7.min.css" rel="stylesheet" type="text/css"> <![endif]--> <script type="text/javascript" src="./配置Nagios监控IPMI硬件设备_监控统计与日志分析_Linux Today_files/jquery-1.8.3.min.js.下载"></script> <script type="text/javascript" src="./配置Nagios监控IPMI硬件设备_监控统计与日志分析_Linux Today_files/load-more-post.js.下载"></script> <!--[if IE 6]> <script src="http://112.124.15.130/res/linuxde_www/js/belatedPNG.js"></script> <script>DD_belatedPNG.fix('*');</script> <script src="http://letskillie6.googlecode.com/svn/trunk/letskillie6.zh_CN.pack.js"></script> <![endif]--><link rel="canonical" href="http://www.linuxde.net/2013/10/15408.html"></head><body><iframe src="./配置Nagios监控IPMI硬件设备_监控统计与日志分析_Linux Today_files/acbeacon2.html" style="width: 0px; height: 0px; display: none;"></iframe> <noscript>&lt;p class="nojs"&gt;您的浏览器已经禁用了脚本，这可能会影响您正常使用本站的功能。&lt;/p&gt; </noscript><div class="linuxde-page"><div class="top-nav mb30"><div class="l"><ul><li class="mr30"><i class="icon-book"></i><a href="http://man.linuxde.net/" title="linux命令大全" target="_blank" style="color:#900">Linux命令大全</a></li><li class="mr30"><i class="icon-asterisk"></i><a href="http://www.linuxde.net/the_china_open_source_mirror_site">开源镜像站</a></li><li class="mr30"><i class="icon-cloud-download"></i><a href="http://www.linuxde.net/linux-download">Linux系统下载</a></li><li class="mr30"><i class="icon-rss"></i><a href="http://www.linuxde.net/go.php?http://list.qq.com/cgi-bin/qf_invite?id=b9369862eea77589f5fd6d44d5171f507c914b1e5a4b5b3c" target="_blank">订阅到邮箱</a></li><div class="c"></div></ul></div><div class="search r"><form action="http://www.linuxde.net/"><div class="search-box"> <input type="text" name="s" id="s" value="SEARCH" onfocus="if (value ==&#39;SEARCH&#39;){value =&#39;&#39;}" onblur="if (value ==&#39;&#39;){value=&#39;SEARCH&#39;}"> <i class="icon-search"></i></div></form></div><div class="c"></div></div><div class="header mb30 clearfix"><h2 class="logo l"><a title="Linux Today" href="http://www.linuxde.net/"> Linux Today </a></h2><div class="ad728x90 r"> <script type="text/javascript">document.write('<a style="display:none!important" id="tanx-a-mm_22964816_3205091_33734252"></a>');
        tanx_s = document.createElement("script");
        tanx_s.type = "text/javascript";
        tanx_s.charset = "gbk";
        tanx_s.id = "tanx-s-mm_22964816_3205091_33734252";
        tanx_s.async = true;
        tanx_s.src = "http://p.tanx.com/ex?i=mm_22964816_3205091_33734252";
        tanx_h = document.getElementsByTagName("head")[0];
        if(tanx_h)tanx_h.insertBefore(tanx_s,tanx_h.firstChild);</script><ins style="display:inline-block;padding:0;margin:0;width:728px;height:90px;*zoom:1;*display:inline; position:relative;" id="tanxssp-outer-conmm_22964816_3205091_33734252"><div id="tanxssp_con_mm_22964816_3205091_33734252" style="overflow:hidden;display:inline-block;position:relative;width:728px;height:90px;*display:inline;*zoom:1;font:12px/1.5 tahoma,&#39;Hiragino Sans GB&#39;,&#39;microsoft yahei&#39;,sans-serif;"><iframe id="tanxssp-tuwen-iframemm_22964816_3205091_33734252" src="./配置Nagios监控IPMI硬件设备_监控统计与日志分析_Linux Today_files/TB16VzrPVXXXXafaXXXXXXXXXXX.html" style="width:728px;height:90px" border="0" frameborder="0" marginwidth="0" marginheight="0" scrolling="no" allowtransparency="true"></iframe><a id="iconmm_22964816_3205091_33734252" title="我也要申请橱窗推广" target="_blank" href="http://pro.taobao.com/index.htm?spm=a2320.7388781.1998051528.5.JOvNkN" style="overflow: hidden; width: 15px; height: 13px; right: 20px; bottom: 0px; display: block; position: absolute; cursor: pointer; z-index: 250;">   <span id="icon_smallmm_22964816_3205091_33734252" style="border-right: 2px solid rgb(238, 238, 238); float: none; width: 13px; display: block; height: 13px; box-sizing: content-box;"><img src="./配置Nagios监控IPMI硬件设备_监控统计与日志分析_Linux Today_files/TB1DmcoJXXXXXavXpXXXXXXXXXX-26-26.png" border="0" style="width:13px;height:13px;margin:auto;display:block;"></span>   <span id="icon_bigmm_22964816_3205091_33734252" style="float: none; width: 60px; height: 13px; display: none;"><img src="./配置Nagios监控IPMI硬件设备_监控统计与日志分析_Linux Today_files/TB1Lt7aJXXXXXcjXVXXXXXXXXXX-117-26.png" style="width:60px;height:13px;margin:auto;display:block;" border="0/"></span></a><a id="sxmm_22964816_3205091_33734252" href="javascript:;" style="width:20px;height:13px;right:0px;bottom:0px;display:block;position:absolute;cursor:pointer;z-index:250;margin:0;">   <span id="sx1mm_22964816_3205091_33734252" style="float:none;width:20px;display:block;height:13px;"><img src="./配置Nagios监控IPMI硬件设备_监控统计与日志分析_Linux Today_files/TB1tWvVJFXXXXc_aXXXXXXXXXXX-40-26.png" style="width:20px;height:13px;margin:auto;display:block;min-height:13px;" border="0/"></span><div id="sxtipmm_22964816_3205091_33734252" style="display:none;position:absolute;left:-38px;bottom:13px;"><img src="./配置Nagios监控IPMI硬件设备_监控统计与日志分析_Linux Today_files/TB1upAiJXXXXXa5aXXXXXXXXXXX-116-30.png" style="width:58px;height:15px;margin:auto;display:block;min-height:15px;" border="0"></div></a></div></ins><a style="display:none!important" id="tanx-a-mm_22964816_3205091_33734252"></a> </div><div class="c"></div></div><div class="main-nav clearfix"><div class="nav fz16"><ul id="menu-1" class="menu"><li id="menu-item-4886" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-4886"><a href="http://www.linuxde.net/">首页</a></li><li id="menu-item-1839" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-1839"><a title="新闻资讯" href="http://www.linuxde.net/category/integrated_information">新闻</a></li><li id="menu-item-15603" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-15603"><a href="http://www.linuxde.net/category/it_internet_information">互联网</a></li><li id="menu-item-14002" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-14002"><a href="http://www.linuxde.net/category/selected_translations">译文</a></li><li id="menu-item-11745" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children menu-item-11745"><a href="http://www.linuxde.net/category/linux_foundation_knowledge">入门</a><ul class="sub-menu"><li id="menu-item-1053" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-1053"><a title="系统配置和管理" href="http://www.linuxde.net/category/linux_foundation_knowledge/system_configuration_and_management">系统安装与配置管理</a></li><li id="menu-item-1042" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-1042"><a title="Linux命令相关" href="http://www.linuxde.net/category/linux_foundation_knowledge/linux_command">Linux命令相关</a></li><li id="menu-item-1043" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-1043"><a title="linux理论概念知识" href="http://www.linuxde.net/category/linux_foundation_knowledge/theory_knowledge_concept">理论概念知识</a></li></ul></li><li id="menu-item-1052" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-1052"><a title="安全" href="http://www.linuxde.net/category/linux_operation_and_maintenance_management_technology/linux_system_security">安全</a></li><li id="menu-item-1045" class="menu-item menu-item-type-taxonomy menu-item-object-category current-post-ancestor menu-item-has-children menu-item-1045"><a title="Linux职业技术" href="http://www.linuxde.net/category/linux_operation_and_maintenance_management_technology">运维</a><ul class="sub-menu"><li id="menu-item-1054" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-1054"><a title="群集和负载均衡" href="http://www.linuxde.net/category/linux_operation_and_maintenance_management_technology/clustering_and_load_balancing_architecture">群集和负载均衡</a></li><li id="menu-item-1055" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-1055"><a title="虚拟化和云计算" href="http://www.linuxde.net/category/linux_operation_and_maintenance_management_technology/virtualization_and_cloud_computing">虚拟化与云计算</a></li><li id="menu-item-1051" class="menu-item menu-item-type-taxonomy menu-item-object-category current-post-ancestor current-menu-parent current-post-parent menu-item-1051"><a title="监控统计和日志分析" href="http://www.linuxde.net/category/linux_operation_and_maintenance_management_technology/monitoring_statistics_and_log_analysis">监控统计和日志分析</a></li><li id="menu-item-1050" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-1050"><a title="疑难杂症聚合" href="http://www.linuxde.net/category/linux_operation_and_maintenance_management_technology/difficult_and_complicated_illnesses_polymerization">疑难杂症聚合</a></li><li id="menu-item-1049" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-1049"><a title="服务器搭建与应用" href="http://www.linuxde.net/category/linux_operation_and_maintenance_management_technology/and_application_server_to_build">服务器搭建与应用</a></li><li id="menu-item-1047" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-1047"><a title="数据库" href="http://www.linuxde.net/category/linux_operation_and_maintenance_management_technology/database_and_storage">数据库与存储</a></li><li id="menu-item-1046" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-1046"><a title="运维管理经验和工具" href="http://www.linuxde.net/category/linux_operation_and_maintenance_management_technology/operationmaintenance_management_experience_and_tools">运维管理经验与工具</a></li><li id="menu-item-2259" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-2259"><a title="应用加速与性能调优" href="http://www.linuxde.net/category/linux_operation_and_maintenance_management_technology/application_acceleration_and_optimization">应用加速与性能调优</a></li></ul></li><li id="menu-item-1063" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children menu-item-1063"><a title="桌面环境应用" href="http://www.linuxde.net/category/desktop_environment_application">桌面</a><ul class="sub-menu"><li id="menu-item-1068" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-1068"><a title="linux软件应用" href="http://www.linuxde.net/category/desktop_environment_application/software_application">软件应用</a></li><li id="menu-item-1064" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-1064"><a title="娱乐游戏" href="http://www.linuxde.net/category/desktop_environment_application/entertainment_games">娱乐游戏</a></li><li id="menu-item-1067" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-1067"><a title="硬件驱动" href="http://www.linuxde.net/category/desktop_environment_application/hardware_driver">硬件驱动</a></li><li id="menu-item-1066" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-1066"><a title="linux桌面美化" href="http://www.linuxde.net/category/desktop_environment_application/desktop_beautification">桌面美化</a></li><li id="menu-item-1065" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-1065"><a title="linux操作技巧" href="http://www.linuxde.net/category/desktop_environment_application/operating_skills">操作技巧</a></li></ul></li><li id="menu-item-1056" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-1056"><a title="编程语言" href="http://www.linuxde.net/category/liprogramming_language">编程</a></li><li id="menu-item-13007" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-13007"><a href="http://www.linuxde.net/category/embedded_linux_system">嵌入</a></li></ul></div><div class="c"></div></div><div class="tag-nav mb30 clearfix"> <a href="http://www.linuxde.net/tag/html5" class="tag-link-482" title="41个话题" style="font-size: 14px;">HTML5</a> <a href="http://www.linuxde.net/tag/java" class="tag-link-179" title="39个话题" style="font-size: 14px;">java</a> <a href="http://www.linuxde.net/tag/linux" class="tag-link-6" title="161个话题" style="font-size: 14px;">linux</a> <a href="http://www.linuxde.net/tag/linux%e5%91%bd%e4%bb%a4" class="tag-link-29" title="46个话题" style="font-size: 14px;">linux命令</a> <a href="http://www.linuxde.net/tag/android" class="tag-link-151" title="106个话题" style="font-size: 14px;">Android</a> <a href="http://www.linuxde.net/tag/nginx" class="tag-link-7" title="120个话题" style="font-size: 14px;">nginx</a> <a href="http://www.linuxde.net/tag/google" class="tag-link-152" title="77个话题" style="font-size: 14px;">google</a> <a href="http://www.linuxde.net/tag/centos" class="tag-link-23" title="73个话题" style="font-size: 14px;">centos</a> <a href="http://www.linuxde.net/tag/ubuntu" class="tag-link-86" title="236个话题" style="font-size: 14px;">Ubuntu</a> <a href="http://www.linuxde.net/tag/shell" class="tag-link-210" title="50个话题" style="font-size: 14px;">shell</a> <a href="http://www.linuxde.net/tag/windows" class="tag-link-443" title="44个话题" style="font-size: 14px;">Windows</a> <a href="http://www.linuxde.net/tag/mysql" class="tag-link-9" title="118个话题" style="font-size: 14px;">mysql</a> <a href="http://www.linuxde.net/tag/python" class="tag-link-470" title="58个话题" style="font-size: 14px;">Python</a> <a href="http://www.linuxde.net/tag/%e5%be%ae%e8%bd%af" class="tag-link-124" title="55个话题" style="font-size: 14px;">微软</a> <a href="http://www.linuxde.net/tag/wordpress" class="tag-link-15" title="53个话题" style="font-size: 14px;">wordpress</a> <a href="http://www.linuxde.net/tag/%e5%bc%80%e6%ba%90" class="tag-link-129" title="55个话题" style="font-size: 14px;">开源</a> <a href="http://www.linuxde.net/tag/firefox" class="tag-link-605" title="47个话题" style="font-size: 14px;">Firefox</a> <a href="http://www.linuxde.net/tag/apache" class="tag-link-188" title="52个话题" style="font-size: 14px;">apache</a> <a href="http://www.linuxde.net/tag/php" class="tag-link-8" title="76个话题" style="font-size: 14px;">php</a> <a href="http://www.linuxde.net/tag/%e7%a8%8b%e5%ba%8f%e5%91%98" class="tag-link-879" title="47个话题" style="font-size: 14px;">程序员</a><div class="c"></div></div><div class="main clearfix"><div class="left-area single l"><div class="post-hd mb50"><div class="title pb30 mb10"><h1 class="fz22"> 配置Nagios监控IPMI硬件设备</h1></div><div class="info"><ul><li class="date l mr30"><i class="icon-time"></i> 2013/10/28</li><li class="tags l mr30"><i class="icon-tags"></i> <a href="http://www.linuxde.net/tag/nagios" rel="tag">Nagios</a></li><li class="category l mr30"><i class="icon-sitemap"></i> <a href="http://www.linuxde.net/category/linux_operation_and_maintenance_management_technology/monitoring_statistics_and_log_analysis" rel="category tag">监控统计与日志分析</a></li><li class="comments l mr30"><i class="icon-comment-alt"></i> <a href="http://www.linuxde.net/2013/10/15408.html#comments" class=" " title="《配置Nagios监控IPMI硬件设备》上的评论">1</a></li><li class="postedit l"></li><li class="views r"><i class="icon-eye-open"></i> 23,535</li><div class="c"></div></ul></div></div><div class="post-bd fz16"><p> 作为系统管理员，最为担心的故障莫过是：半夜停电，担心UPS能不能坚持到早晨；双休日服务器配件故障，报修无门；精密空调失效，服务器被高温煎熬。以上这些都是机房环境，服务器设备硬件部分的故障。不同制造商之间设备往往使用不同管理软件，一一购买又是很大一笔开支。所以监控硬件不会像监控操作系统上的服务那样容易。</p><p> 好在，服务器硬件管理接口都使用了业界统一的IPMI协议，版本从1.5到2.0不等。从IPMI协议出发，就有可能通过Nagios监控服务器硬件。</p><p> 下面就详细叙述如何使用Nagios监测IBM服务器IMM中集成的各种传感器。并配置IMM以SNMP Trap的形式主动向Nagios发送报警。</p><p> Nagios监控IPMI设备同样分为两个部分：主动获取IPMI传感器参数，IPMI设备向Nagios发送报警通知。接下来的讲解，以IBM X3650M4 (为IMM2界面)和 IBM X3850X5 (为IMM界面)为例讲解。非IBM服务器请阅读对应设备制造商发布的官方文档。</p><p> Nagios获取IPMI参数配置思路。已知IBM IMM板载芯片为操作系统独立的硬件控制芯片，只要在通电的情况下就会自动运行，是一个微系统。IMM可以通过IPMI接口以UDP/623端口访问。那么只需要打通Nagios监控系统到服务硬件管理IMM接口的网络，让Nagios可以和服务器管理接口通信，就可以在<span class="wp_keywordlink"><a href="http://www.linuxde.net/" title="Linux" target="_blank">Linux</a></span>系统上使用ipmitool或者freeipmi之类的关键就可以获取服务器上的各种传感器了。也就是说Nagios可以监测服务器内部硬件环境参数。</p><p> Nagios接收IPMI设备主动发过来的报警通知。IMM2支持以SNMP trap形式主动向特定<span class="wp_keywordlink"><a href="http://man.linuxde.net/ip" title="ip命令" target="_blank">ip</a></span>的主机发送报警。那么只要获取IMM2使用的SNMP mib管理信息库就可以解释并发送服务器硬件报警信息了。</p><h2> 操作步骤<br></h2><p> 接下来的配置需要如下几样东西：</p><ul><li> MIB Browser，用来查看下载到的mib。</li><li> SNMP Trap Sender，用来发送自定义trap，测试Nagios配置是否正确。</li><li> IBM 账号，用来从IBM网站上下载IMM的升级包。自己注册吧！</li><li> 一台笔记本电脑，用来配置IMM2接口。</li></ul><p> 上述两个工具下载地址：<a href="http://ireasoning.com/mibbrowser.shtml" target="_blank">http://ireasoning.com/mibbrowser.shtml</a></p><h2> 设计网络拓扑<br></h2><p> 这一步，其实可以选择不配置。为什么这么说呢？IPMI同时在操作系统上提供一个设备接口。在Linux系统上可以通过ipmitool默认访问本机的IPMI参数。Windows系统也可以通过ipmiutil工具做到同样的事情。这样，就可以通过Linux平台的nrpe和Windows平台的nsclient++工具调用上面两个IPMI工具。同样可以获取到IPMI传感器的值。但是（哈哈！肯定会有一个但是），这种情况下的应用，依赖于操作系统的正常运行。服务器关机或者操作系统死机都会造成硬件监测的不可用。做不到完全的软硬件分离。</p><p> 言归正传，在不影响安全的情况下，实现IMM/IMM2接口和Nagios服务器通信，还是需要一点点配置的。接下来就说一下这一点点配置。下图是物理线路连接情况。</p><p> <img alt="nagios-IPMI-network" src="./配置Nagios监控IPMI硬件设备_监控统计与日志分析_Linux Today_files/0713148A6.jpg"></p><p> 对于上述网络拓扑图，从下往上，做如下几点解释：</p><ol><li> 服务器根据机柜或者位置的不同，接入到傻瓜交换机上。傻瓜交换机上行接入三层交换机vlan 11的access接口。</li><li> 从傻瓜交换机下行连接服务器的网线接入SYSMGMT-IMM接口。配置IP为10.1.11.0网段，掩码为255.255.255.0，网关为10.1.11.254。</li><li> 多台三层交换机间的互联接口，必须trunk vlan 11 100 。其中vlan 100为服务器业务网络使用的vlan。</li><li> 外部网络设备上起服务器业务网络vlan 100的三层接口10.1.100.254，作为默认网关。直连外部网络的三层交换机上起vlan 11和vlan 100的三层接口10.1.11.254盒10.1.100.253。此交换机上配置指向外部网络的默认路由。</li><li> Nagios服务器的业务接口使用10.1.100.253的网关，可以访问vlan100和vlan11。其他服务器的业务网络接口使用10.1.100.254的网关，只能访问vlan100，无法访问vlan11。</li><li> 三层交换机2 上面起的三层接口只是为了便于管理。</li></ol><h2> 修改IMM配置<br></h2><p> 设计完成网络连接方法后，就要动手修改IMM2的配置了。这部分需要的配置任务包括：修改网络接口IP地址和启用SNMP v1 Trap。</p><h3> 修改接口IP地址<br></h3><p> 将笔记本的IP地址配置成192.168.70.0段的地址，掩码为255.255.255.0 。不设网关和DNS。用网线直接讲笔记本网卡接口和服务器IMM管理接口连接。用浏览器访问192.168.70.125 ，如果提示不安全的站点，点击信任，添加一条例外。在接下来的登录界面中输入默认的用户名USERID和密码PASSW0RD，其中0是数字0，非字母O。登陆成功后可看到如下界面</p><p> <img alt="imm-overview-page" src="./配置Nagios监控IPMI硬件设备_监控统计与日志分析_Linux Today_files/071315ZIV.jpg"></p><p> <img alt="imm2-overview-page" src="./配置Nagios监控IPMI硬件设备_监控统计与日志分析_Linux Today_files/07131621I.jpg"></p><p> 上述两个图形界面截图分别是IBM X3850X5 的IMM主界面和IBM X3650M4的IMM2主界面。IMM详细使用方法参见 IMM User’s Guide 下载地址如下：</p><ul><li> <a href="http://download.boulder.ibm.com/ibmdl/pub/systems/support/system_x_pdf/47c9127_zhcn.pdf" target="_blank">http://download.boulder.ibm.com/ibmdl/pub/systems/support/system_x_pdf/47c9127_zhcn.pdf</a></li><li> <a href="http://pic.dhe.ibm.com/infocenter/sonasic/sonas1ic/topic/com.ibm.sonas.doc/imm_users_guide_60y1465.pdf" target="_blank">http://pic.dhe.ibm.com/infocenter/sonasic/sonas1ic/topic/com.ibm.sonas.doc/imm_users_guide_60y1465.pdf</a></li></ul><p> 依次点击 IMM Control/IMM Management — Network interfaces/Network 进入修改IP地址界面。将地址获取模式改为静态配置，然后在下面的地址输入框中填写规划好的IP地址，并在笔记本上做好服务器和管理地址映射关系记录。然后，点击保存。</p><p> 黑色界面为代表的IMM界面（M4以前的），在配置完成IP地址后，需要点击左侧的 Restart IMM重新启动IMM。以蓝色界面为代表的IMM2界面（M4以后的），在点击Apply应用配置以后，需要在当前页面停留3分钟左右。不需要重启IMM，配置会自动生效。生效后，需要重新配置笔记本IP。重启IMM不影响操作系统的正常运行，可放心操作。</p><h3> 启用SNMP和SNMP Trap通知<br></h3><p> 在IP地址修改生效后，重新登陆IMM。依次点击IMM Control/IMM Management — Network protocols/Network，进入修改网络协议界面。点选SNMP选项卡，根据界面配置SNMP v1 Trap 目标主机为Nagios服务器地址10.1.100.20，团体字为snmptrapd配置文件中指定的团体子Password2，访问模式为trap。点击保存。同样，IMM界面需要重启IMM，IMM2界面等待3分钟左右后，会自动生效。下面是IMM 界面的SNMP协议配置界面的截图：</p><p> <img alt="imm-snmp" src="./配置Nagios监控IPMI硬件设备_监控统计与日志分析_Linux Today_files/071316OGp.jpg"></p><p> IMM还需要在Alerts菜单下的SNMP Alert Settings界面中，自定义通过SNMP Trap发送哪些报警。如下面截图。</p><p> <img alt="imm-snmp-trap" src="./配置Nagios监控IPMI硬件设备_监控统计与日志分析_Linux Today_files/071317LU3.jpg"></p><p> IMM2如下图：</p><p> <img alt="imm2-snmp-1" src="./配置Nagios监控IPMI硬件设备_监控统计与日志分析_Linux Today_files/071317mJi.jpg"></p><p> 设置联系人和位置。这部分信息在trap报警内容里面可以显示。</p><p> <img alt="imm2-snmp-2" src="./配置Nagios监控IPMI硬件设备_监控统计与日志分析_Linux Today_files/071318FNj.jpg"></p><p> 自定义勾选启用那些类型的报警通知。</p><p> <img alt="imm2-snmp-3" src="./配置Nagios监控IPMI硬件设备_监控统计与日志分析_Linux Today_files/071318jtQ.jpg"></p><p> 将报警信息以什么团体字发送到哪些接收主机。注意，访问类型设置为trap。</p><h2> 配置监测IPMI传感器状态<br></h2><p> 服务器配置部分也包分为两小节：获取IPMI传感器参数和配置trap报警。获取IPMI传感器需要安装ipmitool/freeipmi/ipmiutil软件套件。这三个软件套件，功能一样，选哪个都行。然后下载Nagios使用的check_ipmi_sensor插件。Trap报警只需要找到IMM用的SNMP mib管理信息库就可以了。</p><h3> 寻找IPMI传感器监测点<br></h3><p> 首先，在Nagios服务器上<span class="wp_keywordlink"><a href="http://man.linuxde.net/ping" title="ping命令" target="_blank">ping</a></span>一下需要监测的几个服务器的IMM管理接口的IP。确保ping得通！然后，在Nagios服务器上安装必要的软件。推荐把那三个软件都装上。因为下载的Nagios插件不知道用哪一个工具呢。安装命令如下：</p><pre><span class="wp_keywordlink"><a href="http://man.linuxde.net/yum" title="yum命令" target="_blank">yum</a></span> install ipmitool freeipmi ipmiutil</pre><p> 针对获取IPMI传感器这一个目的，三个软件包可以通过以下三个命令获取帮助：</p><pre>ipmitool -h
ipmiutil -h
ipmi-sensors --<span class="wp_keywordlink"><a href="http://man.linuxde.net/help" title="help命令" target="_blank">help</a></span></pre><p> 下面是三个工具套件分别获取一台服务器全部的传感器输出结果的命令格式：</p><pre>ipmitool sensor -H 10.1.11.11 -U USERID -P PASSW0RD
ipmiutil sensor -N 10.1.11.11 -U USERID -P PASSW0RD
ipmi-sensors -h 10.1.11.11 -u USERID -p PASSW0RD</pre><p> 上述命令可以输出IP为10.1.11.11的IMM所有的传感器列表和一些简单状态提示。以下参数的ipmitool命令可以详细输出一个传感器的状态。</p><pre>[root@nms ~]# ipmitool sensor -H 10.1.11.11 -U USERID -P PASSW0RD&nbsp; get "PCH Temp"
Locating sensor record...
Sensor ID&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: PCH Temp (0x31)
Entity ID&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; : 45.1
Sensor <span class="wp_keywordlink"><a href="http://man.linuxde.net/type" title="type命令" target="_blank">type</a></span> (Analog)&nbsp; : Temperature
Sensor Reading&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; : 46 (+/- 0.500) degrees C
Status&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; : ok
Lower Non-Recoverable : na
Lower Critical&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; : na
Lower Non-Critical&nbsp;&nbsp;&nbsp; : na
Upper Non-Critical&nbsp;&nbsp;&nbsp; : 93.000
Upper Critical&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; : 98.000
Upper Non-Recoverable : 103.000
Assertion Events&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; :
Assertions Enabled&nbsp;&nbsp;&nbsp; : unc+ ucr+ unr+
Deassertions Enabled&nbsp; : unc+ ucr+ unr+</pre><p> &nbsp;</p><p> 通过观察分析上述命令的输出的各个传感器状态和单个传感器的详细输出。可以发现，大部分传感器都不需要直接监控，异常时通过SNMP Trap报警就可以了。以下几个传感器输出结果还有可借鉴之处：</p><ul><li> 处理器/内存/电源/磁盘驱动器健康状态</li><li> 风扇转速</li><li> 主板温度</li><li> 线路电压</li></ul><p> 上述几个参数的传感器类型分组(Sensor Type)分别为Processor/Memory/Power Supply/Drive Slot/Fan/Temperature/Voltage 。也就是说我们可以直接监测一个类型组的传感器状态就可以了。</p><p> 通过在网络上搜索可用的IPMI插件，发现可用的插件有以下两个：</p><ul><li> <a href="http://exchange.nagios.org/directory/Plugins/Hardware/Server-Hardware/IPMI-Sensor-Monitoring-Plugin/details" target="_blank">http://exchange.nagios.org/directory/Plugins/Hardware/Server-Hardware/IPMI-Sensor-Monitoring-Plugin/details</a></li><li> <a href="http://exchange.nagios.org/directory/Plugins/%2A-Plugin-Packages/Monitoringplug/details" target="_blank">http://exchange.nagios.org/directory/Plugins/%2A-Plugin-Packages/Monitoringplug/details</a></li></ul><p> 经过不断测试，发现第二个插件在获取风扇转速和内存状态时输出结果有差错。所以淘汰第二个插件。</p><p> 好吧，我承认，我是用了第一个插件，才想起来传感器分组监测的。执行下面命令来安装IPMI-Sensor-Monitoring-Plugin插件的<span class="wp_keywordlink"><a href="http://man.linuxde.net/perl" title="perl命令" target="_blank">perl</a></span>依赖模块。</p><pre>yum install perl-IPC-Run</pre><p> IPMI-Sensor-Monitoring-Plugin只有一个用perl语言写的check_ipmi_sensor脚本。调用了freeipmi软件包下的ipmimonitoring命令。使用方法如下：</p><pre>./check_ipmi_sensor -H 10.1.11.11 -U USERID -P PASSW0RD -L USER -T Memory -vv
#命令名 -主机地址 -用户名 -密码 -IPMI执行权限 -传感器分组 -结果输出详细程度</pre><p> 上面命令中，传感器类型分组一项。如果分组名内包含空格的话，请把空格转换为英文半角下划线。这不是check_ipmi_sensor脚本的问题，是freeipmi的问题。另外，如果权限不对，造成脚本无法执行，自己Google一下吧。</p><h3> 修改Nagios配置文件<br></h3><p> 使用check_ipmi_sensor脚本定义Nagios监测命令。将check_ipmi_sensor移动到/usr/lib64/nagios/plugins/文件夹，并以Nagios权限重新执行命令。确保在Nagios用户下不会出现权限问题。</p><pre><span class="wp_keywordlink"><a href="http://man.linuxde.net/cp" title="cp命令" target="_blank">cp</a></span> check_ipmi_sensor /usr/lib64/nagios/plugins/
<span class="wp_keywordlink"><a href="http://man.linuxde.net/sudo" title="sudo命令" target="_blank">sudo</a></span> -u nagios /usr/lib64/nagios/plugins/check_ipmi_sensor -H 10.1.11.11 -U USERID -P PASSW0RD -L USER -T Memory -vv</pre><p> 如果上述命令能成功执行，即可在<span class="wp_keywordlink"><a href="http://man.linuxde.net/command" title="command命令" target="_blank">command</a></span>.conf文件中添加命令定义了。</p><p> 这时又出现一个问题。此时一台服务器已经对应两个IP了，而Nagios主机配置文件中只有一个address定义。好在Nagios支持自定义对象变量（custom object variable），说白了，就是允许用户自定义主机属性，并在command.conf文件中以固定格式的宏变量引用。详细内容再查找资料吧。</p><p> 以上就解决了所有的问题。只修改或添加主机文件，如下格式就行了。</p><pre>define <span class="wp_keywordlink"><a href="http://man.linuxde.net/host" title="host命令" target="_blank">host</a></span>{
use&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;windows-server
host_name&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; &nbsp;JYD-Server
<span class="wp_keywordlink"><a href="http://man.linuxde.net/alias" title="alias命令" target="_blank">alias</a></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;CZB JYD Server
address&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  &nbsp;&nbsp;10.1.9.1
_ipmi_ip&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  &nbsp;&nbsp;10.1.11.11
}

define <span class="wp_keywordlink"><a href="http://man.linuxde.net/service" title="service命令" target="_blank">service</a></span>{
use&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;generic-service
host_name&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;JYD-Server
service_description&nbsp;&nbsp;&nbsp;   &nbsp; Hardware Temperature
check_command&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;  &nbsp;&nbsp;check_ipmi_sensor!Temperature
}

define service{
use&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;generic-service
host_name&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;JYD-Server
service_description&nbsp;&nbsp;   &nbsp;&nbsp; Hardware Fan Health
check_command&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   &nbsp;&nbsp;&nbsp;&nbsp;check_ipmi_sensor!Fan
}

define service{
use&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;generic-service
host_name&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;JYD-Server
service_description&nbsp;&nbsp;&nbsp;   &nbsp; Hardware Porcessor Health
check_command&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;  &nbsp;&nbsp;&nbsp;&nbsp;check_ipmi_sensor!Processor
}

define service{
use&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;generic-service
host_name&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;JYD-Server
service_description&nbsp;&nbsp;   &nbsp;&nbsp; Hardware Memory Health
check_command&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;  &nbsp;&nbsp;&nbsp;check_ipmi_sensor!Memory
}
</pre><p> 同时，修改Nagios命令定义文件command.conf文件。添加如下命令定义：</p><pre>define command{
command_name&nbsp;&nbsp;&nbsp; check_ipmi_sensor
command_line&nbsp;&nbsp;&nbsp; $USER1$/check_ipmi_sensor -H $_HOSTIPMI_IP$ -U USERID -P PASSW0RD -L USER -vv -T $ARG1$
}</pre><p> 添加完所有主机的服务后，执行Nagios命令检查Nagios配置文件的正确性。然后重启服务就可以了。</p><h2> 配置接收Trap报警<br></h2><p> 配置Nagios到这个地步，肯定知道，添加一项新的Trap报警，获取私有的mib最重要。snmptrapd和snmptt和Nagios之间的已经完成消息互通，不太可能短时间内失效。</p><p> Nagios能发出哪个主机的哪些类型的报警消息，取决于Nagios配置了多少主机和snmptt能解释多少种trap消息。也就是mib文件</p><p> Nagios能不能正确的发出trap报警消息，取决于snmptt能不能将报警发送者的IP地址，正确反解析到Nagios主机配置文件中定义的主机名。也就是/etc/hosts文件。</p><p> 综合以上两点，这部分配置的重点就是：找到imm使用的mib文件；正确映射主机名到IP和IPMI_IP 。</p><h3> 获取IBM IMM私有MIB<br></h3><p> 通过Google搜索，在下面的两个帖子中发现，配置IMM的SNMP监控，需要IMM-MIB和IMMALERT-MIB两个MIB库。</p><ul><li> <a href="http://community.zenoss.org/docs/DOC-11972">http://community.zenoss.org/docs/DOC-11972</a></li><li> <a href="https://www.ibm.com/developerworks/community/forums/html/topic?id=77777777-0000-0000-0000-000014703673">https://www.ibm.com/developerworks/community/forums/html/topic?id=77777777-0000-0000-0000-000014703673</a></li></ul><p> 要想通过SNMP的形式配置imm，完成诸如配置channel ip，远程开关机之类的snmpset操作，需要详细阅读了解IMM-MIB库；要接收分析IMM发出的报警，需要详细理解IMMALERT-MIB库。</p><p> 上述两个文件可以从IBM Fix Central页面的任何一个IMM固件升级包中获取。下载IMM固件升级包需要IBM账号。选择好服务器硬件型号，操作系统类型，在第二步选择imm2固件升级。在下载页面选择下载一个以uxz为后缀的文件大小约为67MB的文件。例如ibm_fw_imm2_1aoo48h-3.10_anyos_noarch.uxz (67.12 MB)。将后缀名改为<span class="wp_keywordlink"><a href="http://man.linuxde.net/zip" title="zip命令" target="_blank">zip</a></span> ，用解压缩软件打开。在根目录下就有这两个mib文件。</p><p> 使用snmptt自带的snmpttconvertmib命令，将immalert.mib文件转换成snmptt.conf.ibm-imm2文件。对转换后的文件，稍作修改后，将其路径添加到snmptt.ini文件的结尾。重启snmptt服务即可。mib转换命令和snmptt文件结尾修改部分如下</p><pre>snmpttconvertmib --in=/usr/share/snmp/mibs/immalert.mib --out=/etc/snmp/snmptt.conf.ibm-imm2 --<span class="wp_keywordlink"><a href="http://man.linuxde.net/exec" title="exec命令" target="_blank">exec</a></span>='/usr/lib64/nagios/plugins/eventhandlers/submit_check_result "$A" "SNMP-TRAP" "1" "$Fz" '

[root@nms ~]# <span class="wp_keywordlink"><a href="http://man.linuxde.net/tail" title="tail命令" target="_blank">tail</a></span> /etc/snmp/snmptt.ini
snmptt_conf_files = &lt;&lt; END
/etc/snmp/snmptt.conf
/etc/snmp/snmptt.conf.hh3c-mstp
/etc/snmp/snmptt.conf.vrrp
/etc/snmp/snmptt.conf.hh3c-ui-<span class="wp_keywordlink"><a href="http://man.linuxde.net/man" title="man命令" target="_blank">man</a></span>
/etc/snmp/snmptt.conf.hh3c-entity-ext
/etc/snmp/snmptt.conf.h3c-entity-ext
/etc/snmp/snmptt.conf.huawei-splat-trap
/etc/snmp/snmptt.conf.ibm-imm2
END

[root@nms ~]# service snmptt restart
Stopping snmptt: [&nbsp; OK&nbsp; ]
Starting snmptt: [&nbsp; OK&nbsp; ]</pre><p> 在Nagios监控服务器的/etc/hosts文件中，将被监控服务器的IP和IPMI_IP映射到同一个主机名。如下所示：</p><pre>[root@nms ~]# <span class="wp_keywordlink"><a href="http://man.linuxde.net/cat" title="cat命令" target="_blank">cat</a></span> /etc/hosts | <span class="wp_keywordlink"><a href="http://man.linuxde.net/grep" title="grep命令" target="_blank">grep</a></span> JYD-Server
10.1.9.1 JYD-Server
10.1.11.11 JYD-Server</pre><p> 上述配置完成后，可以将如下所示的SNMP-TRAP服务配置部分，添加到服务器的主机文件中。验证配置文件正确性后，重启Nagios服务即可。</p><pre>define service{
use&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SNMP-TRAP
hosts&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;JYD-Server
service_description&nbsp; &nbsp;&nbsp;&nbsp;   &nbsp;SNMP-TRAP
}</pre><h3> 验证SNMP Trap报警<br></h3><p> 为了验证trap配置的正确性。使用iReasoning MIB browser软件中包含的Trap Sender向Nagios发送一个自定义OID的trap报文，看是不是有相应的报警生成。</p><p> <img alt="snmp-trap-sender" src="./配置Nagios监控IPMI硬件设备_监控统计与日志分析_Linux Today_files/071319inh.jpg"></p><p> 下面是发送出trap报文后，对应主机生成的一项报警信息。</p><p> <img alt="snmp-trap-service-status-test" src="./配置Nagios监控IPMI硬件设备_监控统计与日志分析_Linux Today_files/071319uWu.jpg"></p><p> 从上面两个截图可以看出Trap配置已经生效。</p><h3> 结语<br></h3><p> 本文介绍了如何通过Nagios以IPMI协议监控服务器硬件内部的传感器状态。同时以SNMP协议接收服务硬件的主动报警。</p><p> 按照文档配置完成后，读者将会比较深刻的理解IPMI协议。日后研究高可用集群时，肯定会用到IPMI部分的知识。这是后话。</p><p> 文中除了几个脚本之外，并没有提供任何文件。这一切都要您自己去搜集。这些文件中，有一小部分可能要科学上网。</p></div><div class="post-ft mb50"><div class="pn-link pt10 mb50"><div class="previous_post"><i class="icon-circle-arrow-left"></i><a href="http://www.linuxde.net/2013/07/14949.html" rel="prev">使用JConsole远程监控JVM</a></div><div class="next_post"><a href="http://www.linuxde.net/2014/05/15580.html" rel="next">Linux监控软件sar安装和sar系统报告命令使用详解</a><i class="icon-circle-arrow-right"></i></div><div class="c"></div></div><div class="related-post"><div class="area-hd mb30"><h3 class="l fz16"><i class="icon-coffee"></i>延伸阅读</h3><div class="c"></div></div><ul style="margin-bottom:15px;padding-bottom:15px;border-bottom:1px dashed #ccc;"><li><i class="icon-angle-right"></i><a href="http://www.linuxde.net/2013/07/14885.html" title="hugwww-hp sl4540 gen8 硬件监控Nagios">hugwww-hp sl4540 gen8 硬件监控Nagios</a></li><li><i class="icon-angle-right"></i><a href="http://www.linuxde.net/2013/04/13189.html" title="Nginx下构建nagios监控平台Nagios+nrpe+nagios-plugins+pnp安装文档">Nginx下构建nagios监控平台Nagios+nrpe+nagios-plugins+pnp安装文档</a></li><li><i class="icon-angle-right"></i><a href="http://www.linuxde.net/2013/03/12687.html" title="nagios内存监测脚本">nagios内存监测脚本</a></li></ul><ul class="list"><li><i class="icon-angle-right"></i><a href="http://www.linuxde.net/2014/05/15580.html" title="Linux监控软件sar安装和sar系统报告命令使用详解">Linux监控软件sar安装和sar系统报告命令使用详解</a></li><li><i class="icon-angle-right"></i><a href="http://www.linuxde.net/2013/07/14949.html" title="使用JConsole远程监控JVM">使用JConsole远程监控JVM</a></li><li class="last"><i class="icon-angle-right"></i><a href="http://www.linuxde.net/2013/07/14885.html" title="hugwww-hp sl4540 gen8 硬件监控Nagios">hugwww-hp sl4540 gen8 硬件监控Nagios</a></li></ul></div></div><div class="post-comments"><div class="area-hd mb30"><h3 class="l fz16"><i class="icon-comments"></i>评论</h3><div class="c"></div></div> <section id="comments"><div class="comments_title"><h3> 1条评论</h3> <span class="addcomment"><a href="http://www.linuxde.net/2013/10/15408.html#respond">写评论</a></span></div><ul id="commentlist" class="clearfix"><li id="comment-3667"> <article class="entry"><div class="avatar"><p class="author"> <span class="name"> 大西洋 </span> <time class="date"> 2014年6月18日 11:24 </time> <span class="reply"> <a class="comment-reply-link" href="http://www.linuxde.net/2013/10/15408.html?replytocom=3667#respond" onclick="return addComment.moveForm(&quot;comment-3667&quot;, &quot;3667&quot;, &quot;respond&quot;, &quot;15408&quot;)">回复</a> </span></p><p class="img"><img alt="" src="http://gravatar.duoshuo.com/avatar/1e5d9907f90b72d78c46c78a0b6f0b7a?s=36&amp;d=http%3A%2F%2Fgravatar.duoshuo.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D36&amp;r=G" class="avatar avatar-36 photo" height="36" width="36"></p></div><div class="comment _css"><p>转载请注明出处。谢谢合作！</p></div><div class="clearfix"></div> </article></li></ul><div id="respond"><div class="cancel-comment-reply"> <a rel="nofollow" id="cancel-comment-reply-link" href="http://www.linuxde.net/2013/10/15408.html#respond" style="display:none;">点击这里取消回复。</a></div><form action="http://www.linuxde.net/wp-comments-post.php" method="post" id="commentform"><p class="textfield"> <input name="author" id="author" value="" size="22" tabindex="1" type="text" aria-required="true"> <label for="author">姓名 <span>*</span> </label></p><p class="textfield"> <input type="text" name="email" id="email" value="" size="22" tabindex="2" aria-required="true"> <label for="email">邮件（不会被泄露） <span>*</span> </label></p><p class="textfield"> <input type="text" name="url" id="url" value="" size="22" tabindex="3"> <label for="url">网站/博客</label></p> <!--<br /> <b>Fatal error</b>:  Call to undefined function wp_smilies() in <b>C:\mozhiyan\web\vhosts\www.linuxde.net\wp-content\themes\linuxde\comments.php</b> on line <b>68</b><br />--></form></div></section></div></div></div></div></body></html>